!function(e){document.querySelector(".mz-accesories__button--buy")&&e(".product-qd-v1-standard .buy-button").addClass("secondary");var t="/checkout/cart/add?sku="+Product.captureSkuSelectors()[0]+"&qty=1&seller=1&redirect=true&sc=1";(e(".mz-pickup__button--buy").attr("href",t),e(".mz-pickup__button--buy").removeClass("lock-button"),e(".link.lojas").click(function(t){t.preventDefault(),e(document.body).addClass("mz-pu-on"),e(document.body).addClass("mz-bo-on")}),e(".mz-pickup__close--button,.mz-modal-overlay").click(function(){e(document.body).removeClass("mz-in-on mz-as-on mz-bo-on mz-pu-on")}),ga("create","UA-133498560-1","autoglassonline.com"),e(".product-qd-v1-price").is(":empty"))?(e(".product-qd-v1-standard.row .header, .product-qd-v1-sku-selection, .product-qd-v1-price, .product-qd-v1-shipping").hide(),e(".product-unavailable").on("click",e=>{e.preventDefault();let t=new Date,i=t.getHours(),s=t.getDay();0===s||6===s||i<8||i>=18?(zE("webWidget","chat:addTags","fora-expediente"),zE("webWidget","chat:send",`Ol\xe1, nosso hor\xe1rio de atendimento \xe9 de Seg-Sex de 08-18h, no momento estamos sem consultor dispon\xedvel. Clique aqui e fale conosco pelo whatsapp: https://bit.ly/3hZB6js
  Produto de interesse: ${window.location.href}`)):zE("webWidget","chat:send",`Ol\xe1, tenho interesse neste produto, mas est\xe1 indispon\xedvel no site: ${window.location.href}`),zE("webWidget","open")}),e(".talk-to-seller").show(),e("#similars").is(":empty")||(e(".other-brands").show(),e(".other-brands button").click(t=>{t.preventDefault(),e(window).width()>900?e("html, body").stop().animate({scrollTop:e("#similars").offset().top-300},900,"swing"):e("html, body").stop().animate({scrollTop:e("#similars").offset().top-170},900,"swing")}),e(".product-unavailable").addClass("buy-button other-brands secondary"),document.querySelector("#myModal").style.display="block",vtexjs.catalog.getCurrentProductWithVariations().done(function(t){window.dataLayer.push({event:"sem_estoque_redirecionamento"}),window.location.replace(e("#similars .qd-product-is-in-stock-true a.shelf-qd-v1-stamps")[0].href+"#redirecionamento=produtoindisponivel&produto="+t.productId)})),ga("send","event","estoque","detalhe-produto","indisponivel")):ga("send","event","estoque","detalhe-produto","disponivel"),e("#instalar-na-loja-btn").click(e=>localStorage.setItem("AG_SeletedChannel","pickup-in-point")),e("#retire-na-loja-btn").click(e=>localStorage.setItem("AG_SeletedChannel","pickup-in-point")),e("#instalar-em-casa-btn").click(e=>localStorage.setItem("AG_SeletedChannel","delivery")),e("#receba-em-casa-btn").click(e=>localStorage.setItem("AG_SeletedChannel","delivery")),setTimeout(function(){e("#txtCep").after('<span class="ttp"></span>')},500),window.vtxctx&&vtxctx.categoryName&&e("#similars h2").after(`<p class="descricao-rollout">Confira op\xe7\xf5es de <strong>${vtxctx.categoryName.toLowerCase()}</strong> para este mesmo ve\xedculo ${e(".value-field.Compatibilidade-Modelo").length?`(<strong>${e(".value-field.Compatibilidade-Modelo").html()}</strong>)`:e(".value-field.Veiculo").length?`(<strong>${e(".value-field.Veiculo").html()}</strong>)`:""}</p>`),e("#sugestoes h2").after(`<p class="descricao-rollout">
        Aproveite e confira outros produtos
        ${e(".value-field.Compatibilidade-Modelo").length?` para <strong>${e(".value-field.Compatibilidade-Modelo").html()}</strong>`:e(".value-field.Veiculo").length?` para <strong>${e(".value-field.Veiculo").html()}</strong>`:""}
      </p>`),e(window).on("load",()=>{let e=document.querySelector(".freight-values"),t=new MutationObserver(()=>{let t=document.querySelector("#txtCep"),i=[];[...e.querySelectorAll("td")].filter(e=>!(e.innerText.includes("Frete Gr\xe1tis")||""==e.innerText||e.innerText.startsWith("R$"))).map(e=>e.innerText).forEach(e=>{let t=e.split(",")[0];t.startsWith("Frete Retirada")&&!i.includes("Retirada em Loja")&&i.push("Retirada em Loja"),t.startsWith("Frete Autoglass Express")&&i.push("Autoglass Express"),t.startsWith("Frete PAC")&&i.push("PAC"),t.startsWith("Frete Sedex")&&i.push("Sedex"),t.startsWith("Frete Transportadora")&&i.push("Transportadora"),t.startsWith("Frete Normal")&&i.push("Normal")}),i.length>0?ga("send","event","busca-ceps","encontrado",t.value+","+i.join(",")):ga("send","event","busca-ceps","nao-encontrado",t.value)});e&&t.observe(e,{attributes:!0,childList:!0,subtree:!0}),o()});let i={2:"MG74",3:"PG07",4:"MG24",5:"MG50",6:"MG48",7:"MG25",8:"MG03",9:"MG36",10:"MG60",11:"MG21",12:"MG72",13:"MG59",14:"MG43",15:"MG40",16:"MG40",17:"MG40",18:"MG33",19:"MG63",20:"MG63",21:"MG42",22:"MG29",23:"MG82",24:"MG64",25:"MG07",26:"SP04",27:"SP04",28:"SP04",29:"SP04",30:"SP04",31:"SP04",32:"SP04",33:"SP04",34:"SP04",35:"SP04",36:"SP04",37:"SP04",38:"SP04",39:"MG56"},s=window.location.href.includes("hml")||window.location.href.includes("dev")?"https://api-hml.autoglass.com.br/integracao-b2c/api/web-app/estoques/":"https://api.autoglass.com.br/integracao-b2c/api/web-app/estoques/";async function a(e,t){let i=await fetch(`${s}docas?skuId=${e}&dockId=${t}`);if(!i.ok)throw Error("Erro ao consultar estoque.");return Number(await i.json())}async function o(){try{var e;let t=window.skuJson?.skus?.[0]?.sku||null,s=i[e=(function e(t){for(var i=t+"=",s=document.cookie.split(";"),a=0;a<s.length;a++){for(var o=s[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(i))return o.substring(i.length,o.length)}return console.error("N\xe3o foi poss\xedvel recuprar cookie VTEXSC'\n"),null})("VTEXSC").replace("sc=","")]||null;if(!t||!s){console.warn("SKU ID ou Dock ID ausente.");return}let o=await a(t,s);o>0&&o<=5&&(document.querySelector(".alerta-container").style.display="inline-flex")}catch(n){console.error("Erro na verifica\xe7\xe3o de estoque:",n)}}function n(){let e=document.getElementById("txtCep");e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus(),console.log(e)}e(function t(){let i=[],s={SERVICE:{COUNTRY:"BRA",SKU_ID:vtxctx.skus},CSS:{BASE:".mz-modal-pickup",MODAL_LIST:".mz-pickup-stores__list ul"}},a={buildListStore:function t(i){let a="";i.length?(e(".without-store").hide(),i.forEach(({id:e,shippingEstimate:t,pickupDistance:i,pickupStoreInfo:s})=>{a+=`
              <li id="${e}" class="pickup">
                <div class="pickup__info">
                  <div class="pickup__info-distance">
                    <svg class="pkpmodal-pickup-point-best-marker-image" width="25" height="32" viewBox="0 0 25 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.4917 22.3169L19.4918 22.3169L19.4967 22.3096C19.5843 22.1782 19.6709 22.0485 19.7564 21.9204C22.0478 18.4883 23.5645 16.2165 23.5645 12.5323C23.5645 6.16317 18.4013 1 12.0323 1C5.66317 1 0.5 6.16317 0.5 12.5323C0.5 16.5417 3.05396 20.5158 5.20313 23.2599C6.56216 24.9952 9.21424 28.1986 11.703 30.3763L12.0323 30.6644L12.3615 30.3763C14.8402 28.2075 16.7075 26.3386 19.4917 22.3169Z" fill="#2D78F6" stroke="white"></path><path d="M18.6968 9.73418L14.6509 9.14642L12.8407 5.48019C12.5239 4.83994 11.4759 4.83994 11.159 5.48019L9.3498 9.14642L5.30298 9.73418C4.53711 9.84573 4.22682 10.7906 4.78365 11.3344L7.71213 14.1878L7.02126 18.2178C6.89096 18.9808 7.69338 19.5667 8.38145 19.2058L11.9999 17.3038L15.6192 19.2068C16.3017 19.5639 17.1107 18.9874 16.9794 18.2187L16.2885 14.1888L19.217 11.3353C19.7729 10.7906 19.4626 9.84573 18.6968 9.73418Z" fill="white"></path></svg>
                    <p>${i.toFixed(1)} km</p>
                  </div>
                  <div class="pickup__info-address">
                    <div class="address-title">
                      <b>${s.friendlyName}</b>
                    </div>
                    <p class="address-location">
                      ${s.address.street} ${s.address.number},
                      ${s.address.complement}
                    </p>
                    <p class="pickup__info-city">${s.address.neighborhood} - ${s.address.city} - ${s.address.state}</p>
                  </div>
                </div>
                <div class="pickup__estimate">
                  <span>Gr\xe1tis</span>
                  <span>Pronto em at\xe9 ${o.calculateTimeEstimate(t)}</span>
                </div>
              </li>
              `})):(e(".without-store").show(),a+='<span><a onclick="$zopim.livechat.window.show()">Clique aqui</a> e fale com a gente pelo chat!</span>'),e(s.CSS.MODAL_LIST).html(a)},addClicks:function t(){e(".pickup").click(function(){e(".pickup").removeClass("selected"),e(this).addClass("selected"),o.saveSelectedPickupPoint(e(this).attr("id"))})}},o=function t(){return{simulateShipping:a,calculateTimeEstimate:function e(t){let i=+t.match(/\d+/)[0];return i+(i>0?" dias \xfateis":" dia \xfatil")},saveSelectedPickupPoint:function e(t){let s=i.find(e=>e.id===t);localStorage.setItem("AG_SeletedPickupPoint",JSON.stringify(s)),o(s.pickupStoreInfo.address.postalCode,"search")},sendCalculateShipping:o};async function a(e){let t={items:[{id:s.SERVICE.SKU_ID,quantity:1,seller:1}],postalCode:e.postalCode,country:s.SERVICE.COUNTRY};return window.jQuery.ajax({url:"/api/checkout/pub/orderForms/simulation",type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(t)})}function o(t,i){e(".mz-pickup__button--buy").click(e=>e.preventDefault()),vtexjs.checkout.calculateShipping({postalCode:t,country:"BRA",addressType:i}).then(t=>{(function e(t){let i=[t.shippingData.availableAddresses[t.shippingData.availableAddresses.length-1],],s=t.shippingData.logisticsInfo[0];if(s){let a=s.slas.filter(e=>"pickup-in-point"===e.deliveryChannel),o=t.shippingData.logisticsInfo.map(e=>({addressId:i[0].addressId,itemIndex:e.itemIndex,selectedDeliveryChannel:"pickup-in-point",selectedSla:a[0].id}));fetch(`/api/checkout/pub/orderForm/${t.orderFormId}/attachments/shippingData`,{method:"post",body:JSON.stringify({clearAddressIfPostalCodeNotFound:!1,expectedOrderFormSections:["shippingData"],selectedAddresses:i,logisticsInfo:o})}).then(e=>e.json()).then(e=>{vtexjs.checkout.sendAttachment("shippingData",{selectedAddresses:i,logisticsInfo:o})})}})(t),e(".mz-pickup__button--buy").unbind("click")})}}();(function t(){return{_init:function t(){let s=JSON.parse(localStorage.getItem("AG_AddressSelected"));s?i(s):e(window).on("cep-finish-load",e=>{i(e.originalEvent.detail.shippingData.address)}),e(window).on("cep-updated",e=>{let t=e.originalEvent.detail;console.log(t.shippingData.address),s(t.shippingData.address)})},simulateShipping:i};async function i(e){if(!e)return;let t=(await o.simulateShipping(e))?.logisticsInfo;if(!t?.length||!t[0]?.slas?.length){console.warn("Nenhum ponto de retirada retornado:",t),a.buildListStore([]);return}let i=t[0].slas.filter(e=>"pickup-in-point"===e.deliveryChannel);a.buildListStore(i),a.addClicks()}})()._init()}),e(function t(){let i=[],s={SERVICE:{COUNTRY:"BRA",SKU_ID:vtxctx.skus},CONTROLS:{IGNORE_DELIVERY:"Autoglass M\xf3vel",SELECTED:"selected"},CSS:{OPEN:".link.cep",MODAL:{BASE:"mz-modal-shipping",BODY:"mz-bo-on mz-sf-on",OVERLAY:".mz-modal-overlay",CLOSE:".mz-shipping__close--button",BUTTON:".mz-shipping__button--buy",TITLE:{ENABLE:".mz-content__title--enable",EMPTY:".mz-content__title--empty"},CONTENT:".mz-shipping__content",LIST:".mz-shipping__list ul"}}},a={_init:function t(){e(s.CSS.MODAL.CONTENT).hide(),e(s.CSS.OPEN).click(()=>{e(document.body).addClass(s.CSS.MODAL.BODY)}),e(s.CSS.MODAL.CLOSE).click(()=>{e(document.body).removeClass(s.CSS.MODAL.BODY)}),e(s.CSS.MODAL.OVERLAY).click(()=>{e(document.body).removeClass(s.CSS.MODAL.BODY)}),e(s.CSS.MODAL.BUTTON).click(()=>{var t="/checkout/cart/add?sku="+vtxctx.skus+"&qty=1&seller=1&redirect=true&sc=1";e(s.CSS.MODAL.BUTTON).attr("href",t)})},buildListDelivery:function t(i){let a="";i.length?(i.forEach(({id:e,name:t,price:i,shippingEstimate:s})=>{a+=`
              <li id="${e}" class="shipping">
                <div class="shipping__name">
                  <b>${t}</b>
                </div>
                <div class="shipping__estimate">
                  <p>Entregue em at\xe9 ${n.formatEstimate(s)}</p>
                </div>
                <div class="shipping__price">
                  <p><b>${n.formatPrice(i)}</b></p>
                </div>
              </li>
            `}),e(s.CSS.MODAL.TITLE.ENABLE).show(),e(s.CSS.MODAL.TITLE.EMPTY).hide()):(e(s.CSS.MODAL.TITLE.ENABLE).hide(),e(s.CSS.MODAL.TITLE.EMPTY).show()),i.length>1&&(a+=`
            <div style="text-align: center;margin-top: 20px;">
              <b>Selecione a op\xe7\xe3o desejada no carrinho.</b>
            </div>
          `),e(s.CSS.MODAL.LIST).html(a),e(s.CSS.MODAL.CONTENT).show()}},o=function t(){return{_init:function t(){a._init();let s=JSON.parse(localStorage.getItem("AG_AddressSelected"));s?i(s.postalCode):e(window).on("cep-finish-load",e=>{i(e.originalEvent.detail.shippingData.address.postalCode)}),e(window).on("cep-updated",e=>{i(e.originalEvent.detail.shippingData.address.postalCode)})},searchDeliverys:i};async function i(e){let{logisticsInfo:t}=await n.simulateShipping({postalCode:e});if(!t?.length||!t[0]?.slas?.length){console.warn("Nenhuma op\xe7\xe3o de entrega retornada:",t),a.buildListDelivery([]);return}let[i,s]=t[0].slas.filter(e=>"delivery"===e.deliveryChannel),o,l;s&&(o=n.getEstimateDays(i.shippingEstimate),l=n.getEstimateDays(s.shippingEstimate)),s&&l<o?(s.name="Mais r\xe1pida",i.name="Mais econ\xf4mica",a.buildListDelivery([i,s])):i?(i.name="Melhor op\xe7\xe3o",a.buildListDelivery([i])):a.buildListDelivery([])}}(),n=function e(){return{simulateShipping:t,formatPrice:function e(t){let i="R$ ";if(0===t)return"Gr\xe1tis";let[s]=(t+="").match(/\w{2}$/);return i+=t.slice(0,t.length-2),i+=",",i+=s},formatEstimate:function e(t){let[i]=t.match(/\d+/),s=i;return i>1?s+=" dias \xfateis":s+=" dia \xfatil",s},saveSelectedDelivery:function e(t){let s=i.find(e=>e.id===t);localStorage.setItem("AG_SeletedDelivery",JSON.stringify(s))},getEstimateDays:function e(t){if(t)return+t.match(/\d+/)[0]}};async function t(e){if(!s.SERVICE.SKU_ID){console.warn("Nenhum SKU dispon\xedvel para simular frete.");return}let t={items:[{id:String(s.SERVICE.SKU_ID),quantity:1,seller:String(s.SERVICE.SELLER||1)},],postalCode:String(e.postalCode).replace(/\D/g,""),country:String(s.SERVICE.COUNTRY||"BRA").toUpperCase()};try{return await window.jQuery.ajax({url:"/api/checkout/pub/orderForms/simulation",type:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify(t)})}catch(i){return console.error("simulateShipping error:",i),{}}}}();o._init()})}(jQueryNew);