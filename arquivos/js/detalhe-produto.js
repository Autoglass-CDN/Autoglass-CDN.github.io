const sections=[...document.querySelectorAll("section.tab-content")],getLinkById=e=>document.querySelector(`a[href='#${e}'].tab-link`);var veiculosBuscaveis=[];const sugestoesContainer=$(".veiculos-compativeis-search__search-suggestions");$(".veiculos-compativeis-search").hide();const inView=(e,t)=>{let a=e.offsetTop,i=e.offsetHeight;for(;e.offsetParent;)a+=(e=e.offsetParent).offsetTop;return t&&(a-=t>1200?250:130),a<window.pageYOffset+window.innerHeight&&a+i>window.pageYOffset};window.onscroll=()=>{let e=!1;sections.forEach((t=>{const a=(i=t.id,document.querySelector(`a[href='#${i}'].tab-link`));var i;inView(t,window.innerWidth)&&!e?(a.classList.add("tab--current"),e=!0):a&&a.classList.remove("tab--current")}))};const toggleSectionCollapse=e=>{e.classList.contains("ativo")?e.classList.remove("ativo"):e.classList.add("ativo")},sectionCollapseInit=()=>{document.querySelectorAll(".contents .tab-content h2").forEach((e=>{e.onclick=t=>{toggleSectionCollapse(e.closest(".tab-content"))},"Compre Junto"!==e.textContent&&"Outras Marcas"!==e.textContent||setTimeout((()=>toggleSectionCollapse(e.closest(".tab-content"))),5e3)}))};async function insertBrandDescription(){return fetch("/api/catalog_system/pub/brand/list").then((e=>e.json())).then((e=>{const t=document.querySelector(".brandName").classList.value.replace("brandName","").trim().replace("-"," ").split(" ")[0],a=e.find((e=>e.name.includes(t)));if(a&&""!==a.metaTagDescription){const e=a.metaTagDescription,t=document.querySelector("#descricao-marca");t.textContent=e,t.parentElement.parentElement.style.display="block"}}))}async function getProductRefIdByProductName(){const e=await vtexjs.catalog.getCurrentProductWithVariations(),[t,a]=e.name.match(/(\d+)(\s?\-?\s?[0-9]+)?$/);return a}async function loadOptionals(){const e=$("#opcionais"),t=await getProductRefIdByProductName(),a=window.location.href.includes("dev")||window.location.href.includes("mvp")?"https://api-hml.autoglass.com.br/integracao-b2c/api/web-app":"https://api.autoglass.com.br/integracao-b2c/api/web-app";try{const{Opcionais:i}=await $.get(`${a}/produtos/${t}/opcionais`);i&&i.length>0&&e.html(`\n        <h3>Características</h3>\n        <div class="caracteristicas__box">\n          ${i.map((e=>`<span class="caracteristicas__caracteristica">${e}</span>`)).join("")}\n        </div>\n      `)}catch(e){console.error("Falha ao renderizar opcionais. \n ",e)}}async function loadSimilars(){const e=e=>document.querySelector(`a[href="#${e}"]`).parentElement.style.display="none",t=e=>""!=document.querySelector(`#${e}`).innerHTML,a=e=>(document.querySelector(`#${e}`).style.display="block")&&(document.querySelector(`a[href="#${e}"]`).parentElement.style.display="unset");e("outras-marcas"),e("compre-junto"),t("similars")&&a("outras-marcas"),t("sugestoes")&&a("compre-junto")}document.querySelectorAll(".contents .tab-content h2").forEach((e=>{e.onclick=t=>{toggleSectionCollapse(e.closest(".tab-content"))},"Compre Junto"!==e.textContent&&"Outras Marcas"!==e.textContent||setTimeout((()=>toggleSectionCollapse(e.closest(".tab-content"))),5e3)})),window.addEventListener("load",insertBrandDescription),window.addEventListener("load",loadOptionals),loadSimilars(),$(window).on("ready",(async()=>{function e(){$(".product-qd-v1-image div#image").css("min-height",$(".product-qd-v1-image #image-main").width())}window.addEventListener("resize",e),e(),function(){const e=encodeURIComponent(location.href);$(".product-qd-v1-social-share a.whatsapp").attr("href",`https://api.whatsapp.com/send?text=${e}`),$(".product-qd-v1-social-share a.twitter").attr("href",`https://twitter.com/intent/tweet?text=${e}`),$(".product-qd-v1-social-share a.mail").attr("href",`mailto:?subject=Quero%20compartilhar%20um%20produto%20da%20Autoglass&body=Veja%20este%20produto%20na%20Autoglass:%0D%0A${e}`),$(".product-qd-v1-social-share a.messenger").attr("href",`fb-messenger://share?link=${e}`),$(".product-qd-v1-social-share a.facebook").attr("href",`https://www.facebook.com/sharer.php?u=${e}`),$(".product-qd-v1-social-share a.popup-trigger").click((e=>{e.preventDefault(),$("div.product-qd-v1-social-share-options-popup").fadeToggle(400,"swing",(()=>{$(".product-qd-v1-social-share a.copy").children("i.fas.fa-check").attr("class","far fa-copy")}))})),$(".product-qd-v1-social-share a.copy").click((e=>{e.preventDefault(),navigator.clipboard.writeText(location.href),$(".product-qd-v1-social-share a.copy").children("i.far.fa-copy").fadeOut("fast").attr("class","fas fa-check").fadeIn("fast")})),$(".product-qd-v1-social-share a:not(.popup-trigger)").click((e=>{const t=$(e.target).closest("a").attr("class").replace("_","").split(" ");for(let e=0;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].slice(1);const a=t.join(" ");ga("create","UA-133498560-1","autoglassonline.com","gaSSTracker"),ga("gaSSTracker.set","transport","beacon"),ga("gaSSTracker.send","event","Social Share",`Compartilhar ${a}`,`Botão ${a}`)}))}();const t=$("#veiculos-compativeis"),a=await getProductRefIdByProductName(),i=window.location.href.includes("dev")||window.location.href.includes("mvp")?"https://api-hml.autoglass.com.br/integracao-b2c/api/web-app":"https://api.autoglass.com.br/integracao-b2c/api/web-app";try{const e=await $.get(`${i}/produtos/${a}/veiculos-compativeis`);veiculosBuscaveis=e;if((!!e&&e.length>0)>0){t.html(`\n        <h2>Veículos Compatíveis</h2>\n        <div class="veiculos-compativeis__box">\n          <div class="veiculos-compativeis__box-header">\n            <button id="group-prev" data-type="prev" type="button">\n            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n              <path id="Icon_ionic-ios-arrow-dropleft-circle" data-name="Icon ionic-ios-arrow-dropleft-circle" d="M19.375,3.375a16,16,0,1,0,16,16A16,16,0,0,0,19.375,3.375Zm3.338,22.238a1.49,1.49,0,0,1,0,2.1,1.467,1.467,0,0,1-1.046.431,1.492,1.492,0,0,1-1.054-.438l-7.231-7.254a1.483,1.483,0,0,1,.046-2.046l7.338-7.362a1.485,1.485,0,0,1,2.1,2.1l-6.3,6.231Z" transform="translate(35.375 35.375) rotate(180)" opacity="0.42"/>\n            </svg>\n            </button>\n            ${e.map((function(e,t){return`\n          <div id="${e.Grupo+t}" class="veiculos-compativeis__header-option">\n              <span>${e.Grupo}</span>\n          </div>\n      `})).join("")}\n            <button id="group-next" data-type="next" type="button">\n              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n                <path id="Icon_ionic-ios-arrow-dropleft-circle" data-name="Icon ionic-ios-arrow-dropleft-circle" d="M19.375,3.375a16,16,0,1,0,16,16A16,16,0,0,0,19.375,3.375Zm3.338,22.238a1.49,1.49,0,0,1,0,2.1,1.467,1.467,0,0,1-1.046.431,1.492,1.492,0,0,1-1.054-.438l-7.231-7.254a1.483,1.483,0,0,1,.046-2.046l7.338-7.362a1.485,1.485,0,0,1,2.1,2.1l-6.3,6.231Z" transform="translate(35.375 35.375) rotate(180)" opacity="0.42"/>\n              </svg>\n            </button>\n          </div>\n          <div class="veiculos-compativeis__box-content">\n              ${e.map((function(e,t){return`\n      <div data-for="${e.Grupo+t}">\n          ${e.Veiculos.map((e=>`\n              <div class="veiculos-compativeis__content-compativel">\n                  <p>${e.Veiculo}</p>\n                  <div>${e.Anos.map((e=>"<span>"+e+"</span>"))}.</div>\n              </div>\n          `)).join("")}\n      </div>\n    `})).join("")}\n          </div>\n        </div>\n      `),$(".veiculos-compativeis__header-option").first().addClass("active"),$(".veiculos-compativeis__box-content div").first().addClass("active"),$(".veiculos-compativeis__header-option").click((function(){$(".veiculos-compativeis__header-option").removeClass("active"),$(this).addClass("active"),$(".veiculos-compativeis__box-content div").removeClass("active"),$(`.veiculos-compativeis__box-content div[data-for="${$(this).attr("id")}"]`).addClass("active")})),$("#veiculos-compativeis .veiculos-compativeis__box .veiculos-compativeis__box-header button").click((function(){const e=$(this).attr("data-type"),t=$("#veiculos-compativeis .veiculos-compativeis__box .veiculos-compativeis__box-header");"next"===e?t[0].scrollBy(200,0):t[0].scrollBy(-200,0)}));const a=$("#veiculos-compativeis .veiculos-compativeis__box .veiculos-compativeis__box-header");$("#veiculos-compativeis h2").click((()=>toggleSectionCollapse(t[0]))),c(a),a.on("scroll",(function(){c($(this))})),$(window).on("resize",(function(){c(a)})),$(".veiculos-compativeis-search").show()}else $('a[href="#veiculos-compativeis"]').parent().hide(),t.hide()}catch(e){$('a[href="#veiculos-compativeis"]').parent().hide(),console.error("Falha ao renderizar os veículos compativeis. \n ",e)}const o="/checkout/cart/add?sku="+Product.captureSkuSelectors()[0]+"&qty=1&seller=1&redirect=true&"+readCookie("VTEXSC");function s(e,t){return`<a href="${o}"\n               class="veiculos-compativeis__content-compativel-link">\n              <p>${e.Veiculo}</p>\n              <div>${e.Anos.map((e=>"<span>"+e+"</span>"))}.</div>\n            </a>`}function n(e){ga("set","transport","beacon"),ga("send","event","Link SelectCar","Clique","Add ao Carrinho")}function c(e){const t=$("#veiculos-compativeis .veiculos-compativeis__box .veiculos-compativeis__box-header button");if(document.querySelector(".veiculos-compativeis__box-header").scrollWidth>window.innerWidth){const i=100*(a=e[0]).scrollLeft/(a.scrollWidth-a.clientWidth);0===i?(t.last().css("display","flex"),t.first().css("display","none")):100===i?(t.first().css("display","flex"),t.last().css("display","none")):t.css("display","flex")}else t.css("display","none");var a}if($(".veiculos-compativeis-search__search-box .veiculos-compativeis-search__search-input input").on("input",(function(){!function(e){if(veiculosBuscaveis&&veiculosBuscaveis.length>0&&e.length>0){const t=veiculosBuscaveis.map((t=>t.Veiculos.filter((t=>new RegExp(e.split(" ").map((e=>`(?=.*${e})`)).join(""),"i").test(t.Veiculo))))).filter((e=>e.length>0));t.length?(sugestoesContainer.html(t.flat().slice(0,3).map(s).join("")+'<div class="veiculos-compativeis-search__link">\n                            <a href="#veiculos-compativeis">Ver todos</a>\n                          </div>'),document.querySelectorAll("a.veiculos-compativeis__content-compativel-link").forEach((e=>e.addEventListener("click",n)))):sugestoesContainer.html('\n          <div class="veiculos-compativeis-search__disclaimer">\n            Modelo de carro não compatível :(\n          </div>\n          <div class="veiculos-compativeis-search__link">\n            <a href="#veiculos-compativeis">Ver todos</a>\n          </div>\n        ')}else sugestoesContainer.empty()}($(this).val())})),void 0===getLastTimeWhildshieldVanePopUpWasShown()||Date.now()-getLastTimeWhildshieldVanePopUpWasShown()>calculatesTwelveHours())return async function(){function e(e){return e.productName.startsWith("Palheta")}!!(await vtexjs.catalog.getCurrentProductWithVariations()).name.startsWith("Parabrisa")&&($("body").append('\n      <div id="windshildVane-advertise">\n      </div>\n    '),$('a[href*="/checkout/cart/add?sku="], .mz-accesories__button a, .mz-advantages__button a, .mz-install__button a, .mz-shipping__button a, .mz-pickup__button a').on("click",(async function(t){t.preventDefault();const a=await async function(){const t=window.location.origin+"/api/catalog_system/pub/products/crossselling/suggestions/"+vtxctx.skus,a=await fetch(t).then((e=>e.json()));return a.filter(e)}();if(!a.length){const e=this.href;return document.location.href=e}!function(e,t){$("#windshildVane-advertise").append('\n        <div class="advertise">\n          <div class="image"></div>\n          <div class="exit-button">×</div>\n          <div class="container-smallheight">\n          <div class="text-popup">\n            <h2>Recomendamos trocar as palhetas a cada <b>6 meses</b> ou na <b>troca de parabrisa.</b></h2>\n            <h3>Deseja adicionar?</h3>\n          </div>\n            <div class="buy-button">\n              <div id="sim-modal-palheta" class="yes"></div>\n              <div id="nao-modal-palheta" class="no"></div>\n            </div>\n          </div>\n        </div>\n      '),function(e){const t="https://autoglass.vteximg.com.br";let a=e.items[0].images[0].imageTag.replaceAll("~",t).replaceAll("#width#","300").replaceAll("#height#","300");$("#windshildVane-advertise div.image").append(a)}(t[0]);const a=e.srcElement.cloneNode();(function(e,t){var a=Date.now();t.innerText="Não, obrigado!",$("#windshildVane-advertise div .buy-button .no").append(t.cloneNode(!0)).click((function(e){localStorage.setItem("lastTimeWhildshieldVanePopUpWasShown",a)})),t.innerText="Sim, adicionar!";const i=`${t.href}&sku=${e.items[0].itemId}&qty=1&seller=1&redirect=true&sc=${jssalesChannel}`;t.href=i,$("#windshildVane-advertise div .buy-button .yes").append(t.cloneNode(!0)).click((function(e){localStorage.setItem("lastTimeWhildshieldVanePopUpWasShown",a)}))})(t[0],a),$("#windshildVane-advertise .advertise").addClass("filled"),$("#windshildVane-advertise, .exit-button").click((function(e){$("#windshildVane-advertise .advertise").fadeOut(300),$(this).fadeOut(300),$("#windshildVane-advertise div").remove()})),$("#windshildVane-advertise .advertise").click((function(e){e.stopPropagation()})),$("#windshildVane-advertise").css("display","flex")}(t,a)})))}()}));