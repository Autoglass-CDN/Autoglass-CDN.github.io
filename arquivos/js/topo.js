document.addEventListener("DOMContentLoaded",function(){let e=document.referrer,t=["google.com","bing.com","yahoo.com","duckduckgo.com","baidu.com","yandex.com",].some(t=>e.includes(t));if(t){let a=window.location.href.split(".br")[1];(window.location.href.includes("https://hml.autoglassonline.com.br")||window.location.href.includes("https://loja.autoglassonline.com.br"))&&(window.location.href=`https://autoglassonline.com.br${a}`)}verificaUrlInstitucional()});const device={desktop:".desktop",mobile:".mobile"},numeroWhatsAppAG="552732032540",linkEncurtado="https://bit.ly/43u3oa6",numeroWhatsAppFormatadoAG="(27) 3203-2540",urlWhatsAppApi="https://wa.me/",textoUrlGet="?text=Ol\xe1,%20estou%20navegando%20pelo%20e-commerce,%20pode%20me%20ajudar?";function getLastTimeWhildshieldVanePopUpWasShown(){return Number(localStorage.getItem("lastTimeWhildshieldVanePopUpWasShown"))}function calculatesTwelveHours(){return 432e5}function valueBetweenRange(e,t,a){return e<t?t:e>a?a:e}function verificaUrlInstitucional(){let e=window.location.href.toLowerCase();/institucional|pintura-automotiva|reparo-de-arranhoes-e-amassados/.test(e)&&$(".search-box-mobile").hide()}function fecharAbaCategoria(){let e=document.getElementById("busca-categoria"),t=document.getElementById("busca-peca"),a=document.getElementById("tab-busca-peca"),i=document.getElementById("tab-busca-categoria"),o=(e,t)=>{e&&(t?e.classList.add("is-active"):e.classList.remove("is-active"))};o(e,!1),o(i,!1),o(t,!0),o(a,!0)}if(window.innerWidth>1200){document.addEventListener("click",e);function e(e){let t=document.getElementById("busca-categoria"),a=document.querySelector(".c-busca__tabs.tab-header"),i=a.contains(e.target),o=document.getElementById("tab-busca-placa");o.classList.contains("is-active")||t.contains(e.target)||i||fecharAbaCategoria()}}if(window.innerWidth>1200){let t=document.querySelector(".fulltext-search-box");t.addEventListener("click",()=>{localStorage.setItem("buscaPlaca",null)})}function activateCategory(e,t){let a=document.querySelector(".painel-categorias__menu .painel-categorias__categoria.ativo"),i=document.querySelectorAll(".painel-categorias__categoria-conteudo .painel-categorias__categoria-itens")[t];a&&(a.querySelector(".painel-categorias__categoria-header.ativo")?.classList.remove("ativo"),a.classList.remove("ativo"),document.querySelector(".painel-categorias__categoria-conteudo .painel-categorias__categoria-itens.ativo")?.classList.remove("ativo")),e.querySelector(".painel-categorias__categoria-header")?.classList.add("ativo"),e?.classList.add("ativo"),i?.classList.add("ativo"),currentCategory=e}function toggleVisibility(e){let t=document.getElementById(e);t.style.visibility="hidden"===t.style.visibility?"visible":"hidden"}function getTranslateX(e){let t=getComputedStyle(e).getPropertyValue("transform");return new WebKitCSSMatrix(t).m41}let currentCategory=null;function isActiveElement(e){return e instanceof jQuery?e.hasClass("ativo"):e.classList.contains("ativo")}function getMenuIdName(e){return replaceBlankSpaces(removeSpecialChars(removeAccent($(e).text().toLowerCase())),"-")}function removeAccent(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function removeSpecialChars(e){return e.replace(/[^\w\s]/gi,"")}function replaceBlankSpaces(e,t){return e.replace(/\s/g,t)}async function checkLogin(){var e=document.querySelector(".topo .usuario.desktop");let t=await (await fetch("/no-cache/profileSystem/getProfile")).json();try{if(t.IsUserDefined){var a=t.Email,i=t.FirstName&&t.FirstName.length?t.FirstName:a.match(/([^{0-9}|.|@|-]+)/).pop();e.innerHTML=`<div class="user-avatar-icon"></div>
        <span>
          Ol\xe1, <b>${i}</b>
          <i class="arrow-down-icon-white"></i>
        </span>
        <ul class="usuario__opcoes">
          <li><a href="/_secure/account">Dados Pessoais</a></li>
          <li><a href="/_secure/account#/orders">Meus Pedidos</a></li>
          <li><a href="/_secure/account#/cards">Cart\xf5es</a></li>
          <li><a href="/_secure/account#/addresses">Endere\xe7os</a></li>
          <li id="logout"><button onclick="document.querySelector('#saindo').style.display = 'block'">Sair</button></li>
        </ul>`}else e.innerHTML=`<div class="user-avatar-icon"></div>
      <a id="login">
        <b>Entrar ou Cadastrar</b>
        <i class="arrow-down-icon-white"></i>
      </a>`,document.body.classList.add("not-logged-user")}catch(o){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("Ops, algo saiu errado com o login.",o.message)}}async function checkLoginMobile(){(await (await fetch("/no-cache/profileSystem/getProfile")).json()).IsUserDefined&&document.querySelector("#div-login-mobile").addEventListener("click",()=>{document.getElementById("loading-spinner").style.display="flex",setTimeout(()=>{window.location.href="https://hml.autoglassonline.com.br/_secure/account#/"},500)})}async function fixPlaceholderSearch(){var e=$('.search-box input[type="text"].fulltext-search-box');if(e.length){var t=e.attr("id").replace("ftBox","");enableFullTextSearchBox("ftBox"+t,"ftDept"+t,"ftIdx"+t,"ftBtn"+t,"/SEARCHTERM?&utmi_p=_&utmi_pc=BuscaFullText&utmi_cp=SEARCHTERM","Pesquise por pe\xe7a, produto, montadora..."),setTimeout(()=>{$(".search-box .btn-buscar").unbind().click(e=>{e.preventDefault();let t=$('.search-box input[type="text"].fulltext-search-box'),a={Initial:"Pesquise por pe\xe7a, produto, montadora...",Invalid:"Informe o produto que deseja procurar"},i=t.val()===a.Initial||t.val()===a.Invalid||""===t.val();if(i)t.val("Informe o produto que deseja procurar"),t.unbind("focus"),t.unbind("blur"),t.focus(function(){$(this).filter(function(){return i}).val("")}),t.blur(function(){$(this).filter(function(){return""===$(this).val()}).val(i?a.Invalid:a.Initial)}),$(".search-box").css("border-color","#E74C3C");else{let o=t.attr("id").replace("ftBox","");doSearch("ftBox"+o,"ftDept"+o,"ftIdx"+o,"/SEARCHTERM?&utmi_p=_&utmi_pc=BuscaFullText&utmi_cp=SEARCHTERM","Buscar")}})},1e3)}}async function fixPlaceholderSearchMobile(){var e=$('.search-box-mobile input[type="text"].fulltext-search-box');if(e.length){var t=e.attr("id").replace("ftBox","");enableFullTextSearchBox("ftBox"+t,"ftDept"+t,"ftIdx"+t,"ftBtn"+t,"/SEARCHTERM?&utmi_p=_&utmi_pc=BuscaFullText&utmi_cp=SEARCHTERM","Pesquisar"),setTimeout(()=>{$(".search-box .btn-buscar").unbind().click(e=>{e.preventDefault();let t=$('.search-box input[type="text"].fulltext-search-box'),a={Initial:"Pesquisar",Invalid:"Informe o produto que deseja procurar"},i=t.val()===a.Initial||t.val()===a.Invalid||""===t.val();if(i)t.val("Informe o produto que deseja procurar"),t.unbind("focus"),t.unbind("blur"),t.focus(function(){$(this).filter(function(){return i}).val("")}),t.blur(function(){$(this).filter(function(){return""===$(this).val()}).val(i?a.Invalid:a.Initial)}),$(".search-box").css("border-color","#E74C3C");else{let o=t.attr("id").replace("ftBox","");doSearch("ftBox"+o,"ftDept"+o,"ftIdx"+o,"/SEARCHTERM?&utmi_p=_&utmi_pc=BuscaFullText&utmi_cp=SEARCHTERM","Buscar")}})},1e3)}}async function loadCart(e){let t=document.querySelector(`${e} .menu-carrinho`);t.addEventListener("click",e=>{window.location.href="/checkout/#/cart"});await updateCartItemsCount(t,await vtexjs.checkout.getOrderForm())}window.innerWidth>500&&function e(){let t=null;var a=$(".painel-categorias__categoria.ativo");$(".painel-categorias__categoria-itens-lista-menu li a").hover(function(){t!=this&&$(`#${getMenuIdName(t)}`).removeClass("ativo");let e=$(`#${getMenuIdName(this)}`);isActiveElement(e)||e.addClass("ativo"),t=this}),new MutationObserver(function(e){!isActiveElement(e[0].target)&&t&&currentCategory.innerText!=t.innerText&&$(`#${getMenuIdName(t)}`).removeClass("ativo")}).observe(a[0],{attributes:!0,attributeFilter:["class"]})}();let botoesAdicionarAoCarrinho=document.querySelectorAll(".shelf-qd-v1-buy-button");async function updateCartItemsCount(e,t){return t?updateBadge(e,t.items.length):updateBadge(e)}function updateBadge(e,t){let a=e.querySelector(".badge")?e.querySelector(".badge"):document.createElement("span");a.classList.add("badge"),a.innerHTML="number"==typeof t?t:Number.parseInt(a.innerHTML)+1||1,0!=a.innerHTML&&e.append(a),setTimeout(()=>e.classList.add("loaded"),500)}async function cartItemAddedConfirmation(e){let{skuData:t}=e,a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=a>=1200?device.desktop:device.mobile,o=document.querySelector(`${i} .menu-carrinho .confirmacao`),n=o.querySelector(".item img"),r=o.querySelector(".item .titulo");o.style.visibility="visible";let l=document.querySelector(`${i} .menu-carrinho`);if(updateCartItemsCount(l,!1),t){let c=t.images.filter(e=>e.filter(e=>!0===e.IsMain).length>0).reduce((e,t)=>e.concat(t))[0];n.src=`https://autoglass.vteximg.com.br/arquivos/ids/${c.IdArchive}-90-90/${t.reference}.jpg`,r.textContent=t.name,o.style.opacity="1",setTimeout(()=>{o.style.opacity="0",setTimeout(()=>o.style.visibility="hidden",1e3)},3e3)}}async function autocompleteSearch(e){let{itemsReturned:t}=await (await fetch("/buscaautocomplete?"+new URLSearchParams({maxRows:12,productNameContains:encodeURIComponent(e)}))).json();return t&&t.map(e=>({href:e.href,name:e.name,thumb:e.thumb}))}async function autocompleteInit(e){e.addEventListener("input",async e=>{if(e.target.value.trim().length<4)return;let t=document.querySelector("#autocomplete-search");t.innerHTML="<li><a>Aguarde...</a></li>";let a=await autocompleteSearch(e.target.value);t.innerHTML=a.map(e=>`<li><a href='${e.href}'>${e.thumb}${e.name}</a></li>`).join("")})}function delayedAction(e,t){t&&(t.abort(),t=null),t={};let a=setTimeout(e,100);return t.abort=()=>{clearTimeout(a)},t}function openNav(){let e=document.querySelector(".side-menu-backdrop"),t=document.querySelector("#launcher"),a=document.querySelector("#whatsapp-icon-link");e.style.display="unset",e.style.opacity="1",document.body.style.overflowY="hidden",t.style.transition="opacity 0.5s ease, visibility 0.5s ease",t.style.opacity="0",setTimeout(()=>{t.style.visibility="hidden"},500),t.style.pointerEvents="none",a.style.transition="opacity 0.3s ease",a.style.opacity="0.5";let i=document.getElementById("side-menu");i.style.display="unset",setTimeout(()=>{i.style.width="328px",setTimeout(()=>i.querySelectorAll("a").forEach(e=>e.style.opacity="1"),200)},300),removeFunctions()}function closeNav(){let e=document.querySelector(".side-menu-backdrop"),t=document.getElementById("side-menu"),a=document.querySelector("#launcher"),i=document.querySelector("#whatsapp-icon-link");document.body.style.overflowY="auto",a.style.visibility="visible",a.style.transition="opacity 0.5s ease, visibility 0.5s ease",setTimeout(()=>{a.style.opacity="1"},500),a.style.pointerEvents="auto",i.style.transition="opacity 0.3s ease",i.style.opacity="1",t.querySelectorAll("a").forEach(e=>e.style.opacity="0"),e.style.opacity="1",setTimeout(()=>{t.style.width="0",e.style.display="none",setTimeout(()=>{t.style.display="none"},200)},300),document.querySelector(".side-menu-backdrop").style.display="none"}function openCategorias(){let e=document.getElementById("main-menu"),t=document.getElementById("busca-categoria-mobile");e.style.opacity="0",setTimeout(()=>{e.style.display="none",t.style.display="unset",t.style.opacity="1"},200)}function closeCategorias(){let e=document.getElementById("main-menu"),t=document.getElementById("busca-categoria-mobile");t.style.opacity="0",setTimeout(()=>{t.style.display="none",e.style.display="flex",e.style.opacity="1"},300)}function toggleCategory(e){return console.log(e),e.parentNode.classList.contains("ativo")?e.parentNode.classList.remove("ativo"):e.parentNode.classList.add("ativo")}function removeFunctions(){$(".search-box").removeClass("ativo"),$(".topo").unbind(),$(".container.mobile").unbind()}async function autocompleteInitMobile(e){fixPlaceholderSearchMobile(),e.addEventListener("input",async e=>{if(e.target.value.trim().length<4){$(".search-mobile-autocomplete").hide();return}let t=document.querySelector(".search-mobile-autocomplete"),a=await autocompleteSearch(e.target.value);a.length>0?(t.innerHTML=a.filter((e,t)=>t<3).map(t=>`
        <li>
          <a href='${t.href}'>${t.thumb}${t.name.replace(e.target.value,`<b>${e.target.value}</b>`)}</a>
        </li>
      `).join(""),$(".search-mobile-autocomplete").show()):$(".search-mobile-autocomplete").hide()})}function defineScrollTop(){$("html, body").animate({top:"-=0"},1e22),$("body").on("click",".page-number, .previous, .next",function(){let e=$(window).width();e>1200?pegaLargura(350):e>1100?pegaLargura(250):e<1100&&pegaLargura(550),$(".page-number").removeClass("pgCurrent"),$(this).addClass("pgCurrent")})}function pegaLargura(e){$("html,body").scrollTop(e)}botoesAdicionarAoCarrinho.forEach(e=>{e.addEventListener("click",async function(e){let t=document.querySelector(".menu-carrinho"),a=(await vtexjs.checkout.getOrderForm()).items.length,i=setInterval(async()=>{let e=await vtexjs.checkout.getOrderForm();e.items.length>a&&(clearInterval(i),updateBadge(t,e.items.length))},100)})}),autocompleteInitMobile(document.querySelector(".search-box-mobile .busca input.fulltext-search-box")),checkLoginMobile(),loadCart(device.mobile),document.onload=function(){document.querySelector(".side-menu-backdrop").addEventListener("click",e=>closeNav())},$(".usuario__opcoes-mobile a").click(()=>{closeNav()}),$(window).on("orderFormUpdated.vtex",function(e,t){updateCartItemsCount(document.querySelector(".mobile .menu-carrinho"),t)}),defineScrollTop();const inputBusca=document.querySelector(".busca .fulltext-search-box"),botaoBusca=document.querySelector(".search-box .search-icon");botaoBusca.addEventListener("click",function(){let e=inputBusca.value;dataLayer.push({event:"search",search_term:e})}),inputBusca.addEventListener("keydown",function(e){if(13===e.keyCode){let t=inputBusca.value;dataLayer.push({event:"search",search_term:t})}}),(()=>{let e=null;function t(e,t=200){let a;return(...i)=>{clearTimeout(a),a=setTimeout(()=>{e.apply(this,i)},t)}}document.querySelector(".painel-categorias__categoria-conteudo").addEventListener("mouseenter",t=>{e&&e.abort()}),checkLogin(),fixPlaceholderSearch(),loadCart(device.desktop),$(window).on("orderFormUpdated.vtex",function(e,t){updateCartItemsCount(document.querySelector(".desktop .menu-carrinho"),t)}),$(document).ready(function(){if(document.querySelector(".shelf-qd-v1-buy-button")){var e=new Vtex.JSEvents.Listener("batchBuyListener",t(e=>cartItemAddedConfirmation(e)));skuEventDispatcher.addListener(skuDataReceivedEventName,e)}});let a=document.querySelector(".container.desktop .search-box #autocomplete-search"),i=document.querySelector(".container.desktop .search-box .busca input.fulltext-search-box");i.addEventListener("focus",()=>{a.style.visibility="visible",a.style.opacity="1"}),i.addEventListener("blur",()=>{a.style.opacity="0",setTimeout(()=>a.style.visibility="hidden",1e3)}),i.addEventListener("keydown",e=>{e=e||window.event}),autocompleteInit(i)})();