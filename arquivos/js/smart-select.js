!function(e){!function(e){var s={};function a(l){if(s[l])return s[l].exports;var t=s[l]={i:l,l:!1,exports:{}};return e[l].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=s,a.d=function(e,s,l){a.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:l})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,s){if(1&s&&(e=a(e)),8&s||4&s&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(a.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&s&&"string"!=typeof e)for(var t in e)a.d(l,t,(function(s){return e[s]}).bind(null,t));return l},a.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(s,"a",s),s},a.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},a.p="",a(a.s=0)}([function(s,a){!function(){let s=function(){return{buildMapFilters:l,buildURL:function(e,s,c){let r=a(),i="";if(s.asyncSearchTerm)i+=location.origin,i+=r;else{let n=new URL(c.url);i+=n.href.replace(n.origin,"")}return i+`?${t.ASYNC.LID_FILTER}&${l(--e)}`},getCategoryTree:async function(){return await e.get(`${location.origin}/api/catalog_system/pub/category/tree/${t.ASYNC.TREE_LEVEL}`)},getFilters:async function(a,l,t){return await e.get(s.buildURL(a,l,t))},search:async function(){let e=c.filter(e=>e.routeSelected).length,s=a(),t=location.origin;s&&(t+=s,t+="?"+l(e-1)),location.href=t}};function a(){return c.filter(e=>e.routeSelected).map(e=>e.routeSelected.includes("/")?e.routeSelected:"/"+e.routeSelected).join("")}function l(e){let s="";for(let a=0;a<=e;a++)s+=t.ASYNC.MAP_PARAMS[a];return s}}(),a=function(){return{_initSelect_:function(s){e(".smart-select__main > ."+s.class).click(l=>{e(`.smart-select__main > .${s.class} .smart-select__main-results input`).val(""),s.values&&(a.buildList(s.values,s.class),a.selectOptionIfButtonHasValue(s.class),0!==s.values.length&&(e(`.smart-select__main > .${s.class} .smart-select__main-results`).slideToggle("fast").click(e=>e.stopPropagation()),e(`.smart-select__main > .${s.class} .smart-select__main-results input`).focus()))}),e(`.smart-select__main > .${s.class} > div:first-child`).focus(()=>{e(`.smart-select__main > .${s.class} > div:first-child`).on("keyup",l=>{if("Delete"===l.key||"Backspace"===l.key){let t=c.findIndex(e=>e.class===s.class);a.resetResults(t),e(".smart-select__main > ."+s.class).click()}"Enter"===l.key&&e(".smart-select__main > ."+s.class).click()})}).blur(()=>{e(`.smart-select__main > .${s.class} > div:first-child`).unbind("keyup")}),e(`.smart-select__main > .${s.class} .smart-select__main-results input`).on("keydown",a=>{if("Tab"!==a.key&&"Enter"!==a.key||(a.preventDefault(),e(`.smart-select__main > .${s.class} ul li.${t.CSS.HIGHLIGHT}`).click()),"ArrowDown"===a.key){let l=0;e(`.smart-select__main > .${s.class} ul li`).each((s,a)=>{a.classList.contains(t.CSS.HIGHLIGHT)&&(l+=s+2,e(a).removeClass(t.CSS.HIGHLIGHT))}),l<=e(`.smart-select__main > .${s.class} ul li`).length?(e(`.smart-select__main > .${s.class} ul li:nth-child(${l})`).addClass(t.CSS.HIGHLIGHT),e(`.smart-select__main > .${s.class} .smart-select__main-results ul`).animate({scrollTop:e(`.smart-select__main > .${s.class} ul li:nth-child(${l})`)[0].offsetTop-e(`.smart-select__main > .${s.class} ul li:nth-child(${l})`)[0].scrollHeight-e(`.smart-select__main > .${s.class} ul li:nth-child(${l})`)[0].scrollHeight/2},100)):(e(`.smart-select__main > .${s.class} ul li:nth-child(1)`).addClass(t.CSS.HIGHLIGHT),e(`.smart-select__main > .${s.class} .smart-select__main-results ul`).animate({scrollTop:e(`.smart-select__main > .${s.class} ul li:nth-child(1)`)[0].offsetTop-(e(`.smart-select__main > .${s.class} ul li:nth-child(1)`)[0].scrollHeight+e(`.smart-select__main > .${s.class} ul li:nth-child(1)`)[0].scrollHeight/2)},100))}if("ArrowUp"===a.key){let c=0;e(`.smart-select__main > .${s.class} ul li`).each((s,a)=>{a.classList.contains(t.CSS.HIGHLIGHT)&&(c=s,e(a).removeClass(t.CSS.HIGHLIGHT))}),0!==c?(e(`.smart-select__main > .${s.class} ul li:nth-child(${c})`).addClass(t.CSS.HIGHLIGHT),e(`.smart-select__main > .${s.class} .smart-select__main-results ul`).animate({scrollTop:e(`.smart-select__main > .${s.class} ul li:nth-child(${c})`)[0].offsetTop-(e(`.smart-select__main > .${s.class} ul li:nth-child(${c})`)[0].scrollHeight+e(`.smart-select__main > .${s.class} ul li:nth-child(${c})`)[0].scrollHeight/2)},100)):(e(`.smart-select__main > .${s.class} ul li:nth-child(${e(`.smart-select__main > .${s.class} ul li`).length})`).addClass(t.CSS.HIGHLIGHT),e(`.smart-select__main > .${s.class} .smart-select__main-results ul`).animate({scrollTop:e(`.smart-select__main > .${s.class} ul li:nth-child(${e(`.smart-select__main > .${s.class} ul li`).length})`)[0].offsetTop-(e(`.smart-select__main > .${s.class} ul li:nth-child(${e(`.smart-select__main > .${s.class} ul li`).length})`)[0].scrollHeight+e(`.smart-select__main > .${s.class} ul li:nth-child(${e(`.smart-select__main > .${s.class} ul li`).length})`)[0].scrollHeight/2)},100))}}).on("keyup",e=>{["Tab","ArrowDown","ArrowUp","Enter"].find(s=>s===e.key)||a.filterResults(e,s)}),e(document).on("click",a=>{var l=e(".smart-select__main > ."+s.class);e(a.target).closest(l).length||e(`.smart-select__main > .${s.class} .smart-select__main-results`).slideUp("fast")})},buildList:s,selectOptionIfButtonHasValue:function(s){e(`.smart-select__main > .${s} ul li`).each((a,l)=>{l.innerHTML===e(`.smart-select__main > .${s} div > span`).html()&&e(l).addClass(t.CSS.SELECTED)})},filterResults:function(e,a){e.target.value?s(a.values.filter(s=>i(s.name.toUpperCase()).includes(i(e.target.value.toUpperCase()))),a.class):s(a.values,a.class)},resetResults:r,virtualizedDOM:function(e,s){let a=document.createElement("div");return a.innerHTML=e,[...a.querySelectorAll(s+" > li > a")].map(e=>({id:e.href,name:e.innerHTML.replace(/\s\(\d+\)/,""),pathname:e.pathname,search:e.search}))},createNavigation:function(s,a){let l=c.findIndex(e=>e.class===s),i=c[l],n=c[l+1];e(`.smart-select__main > .${i.class} > div > span`).html(a),e(`.smart-select__main > .${i.class} > div > .${t.CSS.ARROW_DOWN}`).hide(),e(`.smart-select__main > .${i.class} > div > .${t.CSS.CLOSE}`).show().on("click",()=>r(l)),n?(e(".smart-select__main > ."+n.class).removeClass(t.CSS.EMPTY),t.CANT_OPEN||e(".smart-select__main > ."+n.class).click()):t.CANT_OPEN||e(".smart-select__main > ."+i.class).click().focus()}};function s(s,a){let c="";s?(s.forEach(e=>c+=`<li role="treeitem" id="${e.id}">${e.name}</li>`),e(`.smart-select__main > .${a} ul`).html(c),e(`.smart-select__main > .${a} ul li`).hover(s=>{e(`.smart-select__main > .${a} ul li`).removeClass(t.CSS.HIGHLIGHT),e(s.target).addClass(t.CSS.HIGHLIGHT)}).click(e=>l.addClick(e,a)),e(`.smart-select__main > .${a} ul li`).first().addClass(t.CSS.HIGHLIGHT)):e(`.smart-select__main > .${a} ul`).html('<li style="background: white; color:#707070; cursor: default">Nenhum resultado encontrado.</li>')}function r(s){for(let a=s;a<=c.length-1;a++){let l=c[a],r=c[a+1];e(`.smart-select__main > .${l.class} > div > span`).html(l.title),l.routeSelected="",r&&r.canBeClear&&(e(".smart-select__main > ."+r.class).addClass(t.CSS.EMPTY),r.values=[],r.routeSelected=""),e(`.smart-select__main > .${l.class} > div > .${t.CSS.ARROW_DOWN}`).show(),e(`.smart-select__main > .${l.class} > div > .${t.CSS.CLOSE}`).hide()}}function i(e){return[{char:"A",base:/[\300-\306]/g},{char:"a",base:/[\340-\346]/g},{char:"E",base:/[\310-\313]/g},{char:"e",base:/[\350-\353]/g},{char:"I",base:/[\314-\317]/g},{char:"i",base:/[\354-\357]/g},{char:"O",base:/[\322-\330]/g},{char:"o",base:/[\362-\370]/g},{char:"U",base:/[\331-\334]/g},{char:"u",base:/[\371-\374]/g},{char:"N",base:/[\321]/g},{char:"n",base:/[\361]/g},{char:"C",base:/[\307]/g},{char:"c",base:/[\347]/g},].forEach(function(s){e=e.replace(s.base,s.char)}),e}}(),l={addClick:async function(e,l){let t=c.findIndex(e=>e.class===l),i=c[t],n=c[t+1],o=i.values.find(s=>s.id==e.target.id),m=new r;if(m.mostarSpinner(),a.resetResults(t),0!==t&&(i.routeSelected=o.url?o.url.replace(new URL(o.url).origin,""):o.name),n){if(o&&i.isAsyncSearch){let u=await s.getFilters(t,i,o),d=a.virtualizedDOM(u,n.asyncSearchTerm);t+1===c.length-1?d.sort((e,s)=>s.name.localeCompare(e.name)):d.sort((e,s)=>e.name.localeCompare(s.name)),n.values=d}else n.values=o.children.sort((e,s)=>e.name.localeCompare(s.name));a.buildList(n.values,n.class)}a.createNavigation(i.class,e.target.innerHTML),m.ocultarSpinner()},checkRouterParams:async function(){let{pathname:e,search:s}=location;if(s&&s.includes(t.ASYNC.MAP_PARAMS[0])){t.CANT_OPEN=!0;let a=decodeURI(e).split("/").filter(e=>e),{input:r,...i}=a.slice(0,3).join("/").match(/(\w+\/\w+)/),n=[i[0],r,...a.slice(3,a.length)];for(let o=0;o<n.length;o++){let m=c[o],u=m.values.find(e=>e.url?e.url.includes(n[o]):e.name.includes(n[o]));await l.addClick({target:{id:u.id,innerHTML:u.name}},m.class)}}t.CANT_OPEN=!1}},t={ASYNC:{MAP_PARAMS:["PS=20&map=c,c,c",",specificationFilter_36",",specificationFilter_50",",specificationFilter_48",],TREE_LEVEL:2,LID_FILTER:"lid=bf120500-baab-4185-8b70-cc630f7d1c70"},CSS:{HIGHLIGHT:"highlight",EMPTY:"empty",ARROW_DOWN:"fa-caret-down",CLOSE:"fa-close",SELECTED:"selected"},CANT_OPEN:!1},c=[{title:"Produto",class:"produtos",values:[],routeSelected:"",isAsyncSearch:!1,asyncSearchTerm:"",canBeClear:!1},{title:"Pe\xe7a",class:"peca",values:[],routeSelected:"",isAsyncSearch:!0,asyncSearchTerm:"",canBeClear:!0},{title:"Montadora",class:"montadora",values:[],routeSelected:"",isAsyncSearch:!0,asyncSearchTerm:".Compatibilidade.Montadora",canBeClear:!0},{title:"Ve\xedculo",class:"veiculo",values:[],routeSelected:"",isAsyncSearch:!0,asyncSearchTerm:".Ve\xedculo",canBeClear:!0},{title:"Ano",class:"ano",values:[],routeSelected:"",isAsyncSearch:!0,asyncSearchTerm:".Ano",canBeClear:!0},];!async function(){(await s.getCategoryTree()).filter(e=>e.hasChildren).forEach(e=>{c[0].values.push(...e.children)}),await l.checkRouterParams(),a.buildList(c[0].values,c[0].class),c.forEach(a._initSelect_),e("#smart-select-btn").click(s.search)}(),window.onload=()=>{if(window.matchMedia("(max-width: 1100px)").matches){var s=e(".system-error-qd-v1");(s.length||(s=e(".search-qd-v1-result")).length)&&(pixelsToScroll=(aimElementTopOffset=s.offset().top)-(offsets=e("header.nav").height()+e("div.topo").height()),e("html, body").animate({scrollTop:pixelsToScroll},"slow"))}};class r{constructor(){let e=document.querySelectorAll(".smart-select__main-results"),s=document.querySelector(".smart-select__main .smart-select__modal"),a=document.querySelector(".smart-select__header");this.elementos=[...e,s,a]}mostarSpinner(){this.elementos.forEach(e=>e.classList.add("loader-modal--show"))}ocultarSpinner(){this.elementos.forEach(e=>e.classList.remove("loader-modal--show"))}}}()},])}(jQueryNew);