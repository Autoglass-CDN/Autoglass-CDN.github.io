!function(e){var s={};function t(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=e,t.c=s,t.d=function(e,s,a){t.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,s){if(1&s&&(e=t(e)),8&s)return e;if(4&s&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&s&&"string"!=typeof e)for(var l in e)t.d(a,l,function(s){return e[s]}.bind(null,l));return a},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,"a",s),s},t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},t.p="",t(t.s=4)}({4:function(e,s){!function(){const e=function(){return{buildMapFilters:t,buildURL:function(e,l,c){const i=s();let n="";l.asyncSearchTerm?(n+=location.origin,n+=i):n+=c.url;return n+=`?${a.ASYNC.LID_FILTER}&${t(--e)}`,n},getCategoryTree:async function(){return await $.get(`${location.origin}/api/catalog_system/pub/category/tree/${a.ASYNC.TREE_LEVEL}`)},getFilters:async function(s,t,a){const l=e.buildURL(s,t,a);return await $.get(l)},search:async function(){const e=l.filter(e=>e.routeSelected).length,a=s();let c=location.origin;a&&(c+=a,c+="?"+t(e-1));location.href=c}};function s(){return l.filter(e=>e.routeSelected).map(e=>e.routeSelected.includes("/")?e.routeSelected:"/"+e.routeSelected).join("")}function t(e){let s="";for(let t=0;t<=e;t++)s+=a.ASYNC.MAP_PARAMS[t];return s}}(),s=function(){return{_initSelect_:function(e){$(".smart-select__main > ."+e.class).click(t=>{$(`.smart-select__main > .${e.class} .smart-select__main-results input`).val(""),e.values&&(s.buildList(e.values,e.class),s.selectOptionIfButtonHasValue(e.class),0!==e.values.length&&($(`.smart-select__main > .${e.class} .smart-select__main-results`).slideToggle("fast").click(e=>e.stopPropagation()),$(`.smart-select__main > .${e.class} .smart-select__main-results input`).focus()))}),$(`.smart-select__main > .${e.class} > div:first-child`).focus(()=>{$(`.smart-select__main > .${e.class} > div:first-child`).on("keyup",t=>{if("Delete"===t.key||"Backspace"===t.key){const t=l.findIndex(s=>s.class===e.class);s.resetResults(t),$(".smart-select__main > ."+e.class).click()}"Enter"===t.key&&$(".smart-select__main > ."+e.class).click()})}).blur(()=>{$(`.smart-select__main > .${e.class} > div:first-child`).unbind("keyup")}),$(`.smart-select__main > .${e.class} .smart-select__main-results input`).on("keydown",s=>{if("Tab"!==s.key&&"Enter"!==s.key||(s.preventDefault(),$(`.smart-select__main > .${e.class} ul li.${a.CSS.HIGHLIGHT}`).click()),"ArrowDown"===s.key){let s=0;$(`.smart-select__main > .${e.class} ul li`).each((e,t)=>{t.classList.contains(a.CSS.HIGHLIGHT)&&(s+=e+2,$(t).removeClass(a.CSS.HIGHLIGHT))}),s<=$(`.smart-select__main > .${e.class} ul li`).length?($(`.smart-select__main > .${e.class} ul li:nth-child(${s})`).addClass(a.CSS.HIGHLIGHT),$(`.smart-select__main > .${e.class} .smart-select__main-results ul`).animate({scrollTop:$(`.smart-select__main > .${e.class} ul li:nth-child(${s})`)[0].offsetTop-$(`.smart-select__main > .${e.class} ul li:nth-child(${s})`)[0].scrollHeight-$(`.smart-select__main > .${e.class} ul li:nth-child(${s})`)[0].scrollHeight/2},100)):($(`.smart-select__main > .${e.class} ul li:nth-child(1)`).addClass(a.CSS.HIGHLIGHT),$(`.smart-select__main > .${e.class} .smart-select__main-results ul`).animate({scrollTop:$(`.smart-select__main > .${e.class} ul li:nth-child(1)`)[0].offsetTop-($(`.smart-select__main > .${e.class} ul li:nth-child(1)`)[0].scrollHeight+$(`.smart-select__main > .${e.class} ul li:nth-child(1)`)[0].scrollHeight/2)},100))}if("ArrowUp"===s.key){let s=0;$(`.smart-select__main > .${e.class} ul li`).each((e,t)=>{t.classList.contains(a.CSS.HIGHLIGHT)&&(s=e,$(t).removeClass(a.CSS.HIGHLIGHT))}),0!==s?($(`.smart-select__main > .${e.class} ul li:nth-child(${s})`).addClass(a.CSS.HIGHLIGHT),$(`.smart-select__main > .${e.class} .smart-select__main-results ul`).animate({scrollTop:$(`.smart-select__main > .${e.class} ul li:nth-child(${s})`)[0].offsetTop-($(`.smart-select__main > .${e.class} ul li:nth-child(${s})`)[0].scrollHeight+$(`.smart-select__main > .${e.class} ul li:nth-child(${s})`)[0].scrollHeight/2)},100)):($(`.smart-select__main > .${e.class} ul li:nth-child(${$(`.smart-select__main > .${e.class} ul li`).length})`).addClass(a.CSS.HIGHLIGHT),$(`.smart-select__main > .${e.class} .smart-select__main-results ul`).animate({scrollTop:$(`.smart-select__main > .${e.class} ul li:nth-child(${$(`.smart-select__main > .${e.class} ul li`).length})`)[0].offsetTop-($(`.smart-select__main > .${e.class} ul li:nth-child(${$(`.smart-select__main > .${e.class} ul li`).length})`)[0].scrollHeight+$(`.smart-select__main > .${e.class} ul li:nth-child(${$(`.smart-select__main > .${e.class} ul li`).length})`)[0].scrollHeight/2)},100))}}).on("keyup",t=>{["Tab","ArrowDown","ArrowUp","Enter"].find(e=>e===t.key)||s.filterResults(t,e)}),$(document).on("click",s=>{var t=$(".smart-select__main > ."+e.class);$(s.target).closest(t).length||$(`.smart-select__main > .${e.class} .smart-select__main-results`).slideUp("fast")})},buildList:e,selectOptionIfButtonHasValue:function(e){$(`.smart-select__main > .${e} ul li`).each((s,t)=>{t.innerHTML===$(`.smart-select__main > .${e} div > span`).html()&&$(t).addClass(a.CSS.SELECTED)})},filterResults:function(s,t){if(s.target.value){e(t.values.filter(e=>i(e.name.toUpperCase()).includes(i(s.target.value.toUpperCase()))),t.class)}else e(t.values,t.class)},resetResults:c,virtualizedDOM:function(e,s){const t=document.createElement("div");return t.innerHTML=e,[...t.querySelectorAll(s+" > li > a")].map(e=>({id:e.href,name:e.innerHTML.replace(/\s\(\d+\)/,""),pathname:e.pathname,search:e.search}))},createNavigation:function(e,s){const t=l.findIndex(s=>s.class===e),i=l[t],n=l[t+1];$(`.smart-select__main > .${i.class} > div > span`).html(s),$(`.smart-select__main > .${i.class} > div > .${a.CSS.ARROW_DOWN}`).hide(),$(`.smart-select__main > .${i.class} > div > .${a.CSS.CLOSE}`).show().on("click",()=>c(t)),n?($(".smart-select__main > ."+n.class).removeClass(a.CSS.EMPTY),a.CANT_OPEN||$(".smart-select__main > ."+n.class).click()):a.CANT_OPEN||$(".smart-select__main > ."+i.class).click().focus()}};function e(e,s){let l="";e?(e.forEach(e=>l+=`<li role="treeitem" id="${e.id}">${e.name}</li>`),$(`.smart-select__main > .${s} ul`).html(l),$(`.smart-select__main > .${s} ul li`).hover(e=>{$(`.smart-select__main > .${s} ul li`).removeClass(a.CSS.HIGHLIGHT),$(e.target).addClass(a.CSS.HIGHLIGHT)}).click(e=>t.addClick(e,s)),$(`.smart-select__main > .${s} ul li`).first().addClass(a.CSS.HIGHLIGHT)):$(`.smart-select__main > .${s} ul`).html('<li style="background: white; color:#707070; cursor: default">Nenhum resultado encontrado.</li>')}function c(e){for(let s=e;s<=l.length-1;s++){const e=l[s],t=l[s+1];$(`.smart-select__main > .${e.class} > div > span`).html(e.title),e.routeSelected="",t&&t.canBeClear&&($(".smart-select__main > ."+t.class).addClass(a.CSS.EMPTY),t.values=[],t.routeSelected=""),$(`.smart-select__main > .${e.class} > div > .${a.CSS.ARROW_DOWN}`).show(),$(`.smart-select__main > .${e.class} > div > .${a.CSS.CLOSE}`).hide()}}function i(e){return[{char:"A",base:/[\300-\306]/g},{char:"a",base:/[\340-\346]/g},{char:"E",base:/[\310-\313]/g},{char:"e",base:/[\350-\353]/g},{char:"I",base:/[\314-\317]/g},{char:"i",base:/[\354-\357]/g},{char:"O",base:/[\322-\330]/g},{char:"o",base:/[\362-\370]/g},{char:"U",base:/[\331-\334]/g},{char:"u",base:/[\371-\374]/g},{char:"N",base:/[\321]/g},{char:"n",base:/[\361]/g},{char:"C",base:/[\307]/g},{char:"c",base:/[\347]/g}].forEach((function(s){e=e.replace(s.base,s.char)})),e}}(),t={addClick:async function(t,a){const c=l.findIndex(e=>e.class===a),i=l[c],n=l[c+1],r=i.values.find(e=>e.id==t.target.id);if(s.resetResults(c),0!==c&&(i.routeSelected=r.url?r.url.replace(location.origin,""):r.name),n){if(r&&i.isAsyncSearch){const t=await e.getFilters(c,i,r);let a=s.virtualizedDOM(t,n.asyncSearchTerm);c+1===l.length-1?a.sort((e,s)=>s.name.localeCompare(e.name)):a.sort((e,s)=>e.name.localeCompare(s.name)),n.values=a}else n.values=r.children.sort((e,s)=>e.name.localeCompare(s.name));s.buildList(n.values,n.class)}s.createNavigation(i.class,t.target.innerHTML)},checkRouterParams:async function(){let{pathname:e,search:s}=location;if(s){a.CANT_OPEN=!0;const s=decodeURI(e).split("/").filter(e=>e),{input:c,...i}=s.slice(0,3).join("/").match(/(\w+\/\w+)/),n=[i[0],c,...s.slice(3,s.length)];for(let e=0;e<n.length;e++){const s=l[e],a=s.values.find(s=>s.url?s.url.includes(n[e]):s.name.includes(n[e]));await t.addClick({target:{id:a.id,innerHTML:a.name}},s.class)}}a.CANT_OPEN=!1}},a={ASYNC:{MAP_PARAMS:["PS=20&map=c,c,c",",specificationFilter_36",",specificationFilter_50",",specificationFilter_48"],TREE_LEVEL:2,LID_FILTER:"lid=bf120500-baab-4185-8b70-cc630f7d1c70"},CSS:{HIGHLIGHT:"highlight",EMPTY:"empty",ARROW_DOWN:"fa-caret-down",CLOSE:"fa-close",SELECTED:"selected"},CANT_OPEN:!1},l=[{title:"Produto",class:"produtos",values:[],routeSelected:"",isAsyncSearch:!1,asyncSearchTerm:"",canBeClear:!1},{title:"Peça",class:"peca",values:[],routeSelected:"",isAsyncSearch:!0,asyncSearchTerm:"",canBeClear:!0},{title:"Montadora",class:"montadora",values:[],routeSelected:"",isAsyncSearch:!0,asyncSearchTerm:".Compatibilidade.Montadora",canBeClear:!0},{title:"Veículo",class:"veiculo",values:[],routeSelected:"",isAsyncSearch:!0,asyncSearchTerm:".Veículo",canBeClear:!0},{title:"Ano",class:"ano",values:[],routeSelected:"",isAsyncSearch:!0,asyncSearchTerm:".Ano",canBeClear:!0}];!async function(){(await e.getCategoryTree()).filter(e=>e.hasChildren).forEach(e=>{l[0].values.push(...e.children)}),await t.checkRouterParams(),s.buildList(l[0].values,l[0].class),l.forEach(s._initSelect_),$("#smart-select-btn").click(e.search)}()}()}});